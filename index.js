(function(){"use strict";const x=/\/$|\/\?|\/#/;function U(s="",o){return o?x.test(s):s.endsWith("/")}function L(s="",o){if(!o)return s.endsWith("/")?s:s+"/";if(U(s,!0))return s||"/";let t=s,n="";const r=s.indexOf("#");if(r>=0&&(t=s.slice(0,r),n=s.slice(r),!t))return n;const[p,...d]=t.split("?");return p+"/"+(d.length>0?`?${d.join("?")}`:"")+n}function P(s=""){return s.startsWith("/")}function S(s=""){return P(s)?s:"/"+s}function T(s){return s&&s!=="/"}const N=/^\.?\//;function C(s,...o){let t=s||"";for(const n of o.filter(r=>T(r)))if(t){const r=n.replace(N,"");t=L(t)+r}else t=n;return t}const e=window.Vue;function w(){return window.panel}function $(){return w().api}function E(){const s=$();return{load:({parent:t,name:n})=>s.get(`${t}/sections/${n}`)}}function j(){var o;return((o=e.getCurrentInstance())==null?void 0:o.proxy).$store}const R=e.computed;e.customRef,e.defineAsyncComponent;const A=e.defineComponent;e.effectScope,e.getCurrentInstance,e.getCurrentScope,e.h,e.inject,e.isProxy,e.isReactive,e.isReadonly,e.isRef,e.isShallow,e.markRaw,e.nextTick,e.onActivated,e.onBeforeMount,e.onBeforeUnmount,e.onBeforeUpdate,e.onDeactivated,e.onErrorCaptured,e.onMounted,e.onRenderTracked,e.onRenderTriggered,e.onScopeDispose,e.onServerPrefetch,e.onUnmounted,e.onUpdated,e.provide,e.proxyRefs,e.reactive,e.readonly;const c=e.ref;e.shallowReactive,e.shallowReadonly,e.shallowRef,e.toRaw,e.toRef,e.toRefs,e.triggerRef,e.unref,e.useAttrs,e.useCssModule,e.useCssVars,e.useListeners,e.useSlots;const K=e.watch;e.watchEffect,e.watchPostEffect,e.watchSyncEffect;const I={blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number};function O(){const s=w(),o=R(()=>s.languages.map(n=>n.code));return{locales:o,getNonLocalizedPath:n=>{const p=new URL(n).pathname.split("/").filter(Boolean);return o.value.includes(p[0])&&p.shift(),S(p.join("/"))}}}function B(s,o,t,n,r,p,d,v){var a=typeof s=="function"?s.options:s;o&&(a.render=o,a.staticRenderFns=t,a._compiled=!0),n&&(a.functional=!0),p&&(a._scopeId="data-v-"+p);var u;if(d?(u=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__<"u"&&(l=__VUE_SSR_CONTEXT__),r&&r.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(d)},a._ssrRegister=u):r&&(u=v?function(){r.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:r),u)if(a.functional){a._injectStyles=u;var g=a.render;a.render=function(k,_){return u.call(_),g(k,_)}}else{var h=a.beforeCreate;a.beforeCreate=h?[].concat(h,u):[u]}return{exports:s,options:a}}const b={...I},F=A({inheritAttrs:!1}),V=Object.assign(F,{__name:"SerpPreview",props:b,setup(s){const o=s,t=w(),n=j(),{getNonLocalizedPath:r}=O(),p=c(),d=c(),v=c(),a=c(),u=c(),g=c(),h=c(),l=c(),k=c(),_=c(),m=c(""),M=R(()=>n.getters["content/values"]()),H=R(()=>{if(!m.value)return"";if(!t.multilang)return new URL(m.value).pathname;let i=r(m.value);return d.value?i=C(t.language.code,i):t.language.default||(i=C(t.language.code,i)),S(i)});K(()=>t.language.code,async()=>{const{url:i}=await t.api.get(t.view.path);i.value=i},{immediate:!0}),(async()=>{const{load:i}=E(),f=await i({parent:o.parent,name:o.name})();p.value=y(f.label)||"SERP Preview",d.value=f.defaultLanguagePrefix??!0,v.value=f.faviconUrl,a.value=f.siteTitle,u.value=f.siteUrl,h.value=f.titleSeparator,g.value=f.titleContentKey,l.value=f.descriptionContentKey,k.value=f.descriptionFallback,_.value=f.searchConsoleUrl})();function y(i){return!i||typeof i=="string"?i:i[t.translation.code]??Object.values(i)[0]}return{__sfc:!0,propsDefinition:b,props:o,panel:t,store:n,getNonLocalizedPath:r,label:p,defaultLanguagePrefix:d,faviconUrl:v,siteTitle:a,siteUrl:u,titleContentKey:g,titleSeparator:h,descriptionContentKey:l,descriptionFallback:k,searchConsoleUrl:_,url:m,currentContent:M,path:H,t:y,joinURL:C}}});var z=function(){var o=this,t=o._self._c,n=o._self._setupProxy;return t("k-section",{attrs:{label:n.label}},[t("div",{staticClass:"ksp-overflow-hidden ksp-rounded-[var(--input-rounded)] ksp-bg-[var(--input-color-back)] ksp-p-4"},[t("div",{staticClass:"ksp-mb-2 ksp-flex ksp-items-center ksp-gap-3"},[n.faviconUrl?t("figure",{staticClass:"ksp-inline-flex ksp-aspect-square ksp-h-[26px] ksp-w-[26px] ksp-items-center ksp-justify-center ksp-rounded-full ksp-border ksp-border-solid ksp-border-[#ecedef] ksp-bg-[#f1f3f4]"},[t("img",{staticClass:"ksp-block ksp-h-[18px] ksp-w-[18px]",attrs:{src:n.faviconUrl,alt:""}})]):o._e(),t("div",{staticClass:"ksp-flex ksp-flex-col"},[t("span",{staticClass:"ksp-text-sm ksp-text-[#4d5156]"},[o._v(o._s(n.siteTitle))]),t("span",{staticClass:"ksp-line-clamp-1 ksp-text-xs ksp-text-[#4d5156]"},[o._v(o._s(n.joinURL(n.siteUrl,n.path)))])])]),t("h3",{staticClass:"ksp-mb-1 ksp-line-clamp-1 ksp-text-xl ksp-text-[#1a0dab]"},[o._v(" "+o._s(n.currentContent[n.titleContentKey]||[n.panel.view.title,n.titleSeparator,n.siteTitle].join(" "))+" ")]),t("p",{directives:[{name:"show",rawName:"v-show",value:n.currentContent[n.descriptionContentKey],expression:"currentContent[descriptionContentKey]"}],staticClass:"ksp-line-clamp-2 ksp-text-sm ksp-text-[#4d5156]"},[o._v(" "+o._s(n.currentContent[n.descriptionContentKey]||n.descriptionFallback)+" ")])]),t("k-button-group",{directives:[{name:"show",rawName:"v-show",value:n.searchConsoleUrl,expression:"searchConsoleUrl"}],staticClass:"ksp-mt-2 ksp-w-full"},[t("k-button",{attrs:{link:n.searchConsoleUrl,icon:"open",target:"_blank"}},[o._v(" Google Search Console ")])],1)],1)},D=[],W=B(V,z,D,!1,null,null,null,null);const G=W.exports;window.panel.plugin("johannschopplich/serp-preview",{sections:{"serp-preview":G}})})();
