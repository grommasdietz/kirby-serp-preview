(function(){"use strict";const h=/\/$|\/\?|\/#/;function _(e="",t){return t?h.test(e):e.endsWith("/")}function g(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(_(e,!0))return e||"/";let n=e,a="";const i=e.indexOf("#");if(i>=0&&(n=e.slice(0,i),a=e.slice(i),!n))return a;const[c,...l]=n.split("?");return c+"/"+(l.length>0?`?${l.join("?")}`:"")+a}function k(e=""){return e.startsWith("/")}function u(e=""){return k(e)?e:"/"+e}function m(e){return e&&e!=="/"}const C=/^\.?\//;function p(e,...t){let n=e||"";for(const a of t.filter(i=>m(i)))if(n){const i=a.replace(C,"");n=g(n)+i}else n=a;return n}const v={props:{blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number},methods:{load(){return this.$api.get(`${this.parent}/sections/${this.name}`)}}},w={computed:{locales(){return this.$panel.languages.map(e=>e.code)}},methods:{getNonLocalizedPath(e){const n=new URL(e).pathname.split("/").filter(Boolean);return this.locales.includes(n[0])&&n.shift(),u(n.join("/"))}}};function b(e,t,n,a,i,c,l,y){var s=typeof e=="function"?e.options:e;t&&(s.render=t,s.staticRenderFns=n,s._compiled=!0),a&&(s.functional=!0),c&&(s._scopeId="data-v-"+c);var o;if(l?(o=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__<"u"&&(r=__VUE_SSR_CONTEXT__),i&&i.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(l)},s._ssrRegister=o):i&&(o=y?function(){i.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:i),o)if(s.functional){s._injectStyles=o;var R=s.render;s.render=function(T,f){return o.call(f),R(T,f)}}else{var d=s.beforeCreate;s.beforeCreate=d?[].concat(d,o):[o]}return{exports:e,options:s}}const S={mixins:[v,w],inheritAttrs:!1,data(){return{label:void 0,defaultLanguagePrefix:void 0,faviconUrl:void 0,siteTitle:void 0,siteUrl:void 0,titleContentKey:void 0,titleSeparator:void 0,descriptionContentKey:void 0,searchConsoleUrl:void 0,url:""}},computed:{currentContent(){return this.$store.getters["content/values"]()},path(){if(!this.url)return"";if(!this.$panel.multilang)return new URL(this.url).pathname;let e=this.getNonLocalizedPath(this.url);return this.defaultLanguagePrefix?e=p(this.$panel.language.code,e):this.$panel.language.default||(e=p(this.$panel.language.code,e)),u(e)}},watch:{"$panel.language.code":{async handler(){const{url:e}=await this.$api.get(this.$panel.view.path);this.url=e},immediate:!0}},async created(){const e=await this.load();this.label=this.t(e.label)||"SERP Preview",this.defaultLanguagePrefix=e.defaultLanguagePrefix??!0,this.faviconUrl=e.faviconUrl,this.siteTitle=e.siteTitle,this.siteUrl=e.siteUrl,this.titleSeparator=e.titleSeparator,this.titleContentKey=e.titleContentKey,this.descriptionContentKey=e.descriptionContentKey,this.searchConsoleUrl=e.searchConsoleUrl},methods:{joinURL:p,t(e){return!e||typeof e=="string"?e:e[this.$panel.translation.code]??Object.values(e)[0]}}};var U=function(){var t=this,n=t._self._c;return n("k-section",{attrs:{label:t.label}},[n("div",{staticClass:"ksp-overflow-hidden ksp-rounded-[var(--input-rounded)] ksp-bg-[var(--input-color-back)] ksp-p-4"},[n("div",{staticClass:"ksp-mb-2 ksp-flex ksp-items-center ksp-gap-3"},[t.faviconUrl?n("figure",{staticClass:"ksp-inline-flex ksp-aspect-square ksp-h-[26px] ksp-w-[26px] ksp-items-center ksp-justify-center ksp-rounded-full ksp-border ksp-border-solid ksp-border-[#ecedef] ksp-bg-[#f1f3f4]"},[n("img",{staticClass:"ksp-block ksp-h-[18px] ksp-w-[18px]",attrs:{src:t.faviconUrl,alt:""}})]):t._e(),n("div",{staticClass:"ksp-flex ksp-flex-col"},[n("span",{staticClass:"ksp-text-sm ksp-text-[#4d5156]"},[t._v(t._s(t.siteTitle))]),n("span",{staticClass:"ksp-line-clamp-1 ksp-text-xs ksp-text-[#4d5156]"},[t._v(t._s(t.joinURL(t.siteUrl,t.path)))])])]),n("h3",{staticClass:"ksp-mb-1 ksp-line-clamp-1 ksp-text-xl ksp-text-[#1a0dab]"},[t._v(" "+t._s(t.currentContent[t.titleContentKey]?t.currentContent[t.titleContentKey]:[t.$panel.view.title,t.titleSeparator===!1?"":t.titleSeparator,t.siteTitle].join(" "))+" ")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.currentContent[t.descriptionContentKey],expression:"currentContent[descriptionContentKey]"}],staticClass:"ksp-line-clamp-2 ksp-text-sm ksp-text-[#4d5156]"},[t._v(" "+t._s(t.currentContent[t.descriptionContentKey])+" ")])]),n("k-button-group",{directives:[{name:"show",rawName:"v-show",value:t.searchConsoleUrl,expression:"searchConsoleUrl"}],staticClass:"ksp-mt-2 ksp-w-full"},[n("k-button",{attrs:{link:t.searchConsoleUrl,icon:"open",target:"_blank",rel:"noopener noreferrer"}},[t._v(" Google Search Console ")])],1)],1)},$=[],x=b(S,U,$,!1,null,null,null,null);const L=x.exports;window.panel.plugin("johannschopplich/serp-preview",{sections:{"serp-preview":L}})})();
