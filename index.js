(function(){"use strict";const x=/\/$|\/\?|\/#/;function U(s="",o){return o?x.test(s):s.endsWith("/")}function L(s="",o){if(!o)return s.endsWith("/")?s:s+"/";if(U(s,!0))return s||"/";let n=s,t="";const r=s.indexOf("#");if(r>=0&&(n=s.slice(0,r),t=s.slice(r),!n))return t;const[p,...d]=n.split("?");return p+"/"+(d.length>0?`?${d.join("?")}`:"")+t}function P(s=""){return s.startsWith("/")}function S(s=""){return P(s)?s:"/"+s}function T(s){return s&&s!=="/"}const N=/^\.?\//;function C(s,...o){let n=s||"";for(const t of o.filter(r=>T(r)))if(n){const r=t.replace(N,"");n=L(n)+r}else n=t;return n}const e=window.Vue;function w(){return window.panel}function $(){return w().api}function E(){const s=$();return{load:({parent:n,name:t})=>s.get(`${n}/sections/${t}`)}}function j(){var o;return((o=e.getCurrentInstance())==null?void 0:o.proxy).$store}const R=e.computed;e.customRef,e.defineAsyncComponent;const A=e.defineComponent;e.effectScope,e.getCurrentInstance,e.getCurrentScope,e.h,e.inject,e.isProxy,e.isReactive,e.isReadonly,e.isRef,e.isShallow,e.markRaw,e.nextTick,e.onActivated,e.onBeforeMount,e.onBeforeUnmount,e.onBeforeUpdate,e.onDeactivated,e.onErrorCaptured,e.onMounted,e.onRenderTracked,e.onRenderTriggered,e.onScopeDispose,e.onServerPrefetch,e.onUnmounted,e.onUpdated,e.provide,e.proxyRefs,e.reactive,e.readonly;const c=e.ref;e.shallowReactive,e.shallowReadonly,e.shallowRef,e.toRaw,e.toRef,e.toRefs,e.triggerRef,e.unref,e.useAttrs,e.useCssModule,e.useCssVars,e.useListeners,e.useSlots;const K=e.watch;e.watchEffect,e.watchPostEffect,e.watchSyncEffect;const F={blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number};function I(){const s=w(),o=R(()=>s.languages.map(t=>t.code));return{locales:o,getNonLocalizedPath:t=>{const p=new URL(t).pathname.split("/").filter(Boolean);return o.value.includes(p[0])&&p.shift(),S(p.join("/"))}}}function O(s,o,n,t,r,p,d,g){var a=typeof s=="function"?s.options:s;o&&(a.render=o,a.staticRenderFns=n,a._compiled=!0),t&&(a.functional=!0),p&&(a._scopeId="data-v-"+p);var u;if(d?(u=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__<"u"&&(l=__VUE_SSR_CONTEXT__),r&&r.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(d)},a._ssrRegister=u):r&&(u=g?function(){r.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:r),u)if(a.functional){a._injectStyles=u;var k=a.render;a.render=function(m,_){return u.call(_),k(m,_)}}else{var h=a.beforeCreate;a.beforeCreate=h?[].concat(h,u):[u]}return{exports:s,options:a}}const b={...F},B=A({inheritAttrs:!1}),V=Object.assign(B,{__name:"SerpPreview",props:b,setup(s){const o=s,n=w(),t=j(),{getNonLocalizedPath:r}=I(),p=c(),d=c(),g=c(),a=c(),u=c(),k=c(),h=c(),l=c(),m=c(),_=c(),v=c(""),M=R(()=>t.getters["content/values"]()),H=R(()=>{if(!v.value)return"";if(!n.multilang)return new URL(v.value).pathname;let i=r(v.value);return d.value?i=C(n.language.code,i):n.language.default||(i=C(n.language.code,i)),S(i)});K(()=>n.language.code,async()=>{const i=await n.api.get(n.view.path);v.value=i.url},{immediate:!0}),(async()=>{const{load:i}=E(),f=await i({parent:o.parent,name:o.name});p.value=y(f.label)||"SERP Preview",d.value=f.defaultLanguagePrefix??!0,g.value=f.faviconUrl,a.value=f.siteTitle,u.value=f.siteUrl,h.value=f.titleSeparator,k.value=f.titleContentKey,l.value=f.descriptionContentKey,m.value=f.descriptionFallback,_.value=f.searchConsoleUrl})();function y(i){return!i||typeof i=="string"?i:i[n.translation.code]??Object.values(i)[0]}return{__sfc:!0,propsDefinition:b,props:o,panel:n,store:t,getNonLocalizedPath:r,label:p,defaultLanguagePrefix:d,faviconUrl:g,siteTitle:a,siteUrl:u,titleContentKey:k,titleSeparator:h,descriptionContentKey:l,descriptionFallback:m,searchConsoleUrl:_,url:v,currentContent:M,path:H,t:y,joinURL:C}}});var z=function(){var o=this,n=o._self._c,t=o._self._setupProxy;return n("k-section",{attrs:{label:t.label}},[n("div",{staticClass:"ksp-overflow-hidden ksp-rounded-[var(--input-rounded)] ksp-bg-[var(--input-color-back)] ksp-p-4"},[n("div",{staticClass:"ksp-mb-2 ksp-flex ksp-items-center ksp-gap-3"},[t.faviconUrl?n("figure",{staticClass:"ksp-inline-flex ksp-aspect-square ksp-h-[26px] ksp-w-[26px] ksp-items-center ksp-justify-center ksp-rounded-full ksp-border ksp-border-solid ksp-border-[#ecedef] ksp-bg-[#f1f3f4]"},[n("img",{staticClass:"ksp-block ksp-h-[18px] ksp-w-[18px]",attrs:{src:t.faviconUrl,alt:""}})]):o._e(),n("div",{staticClass:"ksp-flex ksp-flex-col"},[n("span",{staticClass:"ksp-text-sm ksp-text-[#4d5156]"},[o._v(o._s(t.siteTitle))]),n("span",{staticClass:"ksp-line-clamp-1 ksp-text-xs ksp-text-[#4d5156]"},[o._v(o._s(t.joinURL(t.siteUrl,t.path)))])])]),n("h3",{staticClass:"ksp-line-clamp-1 ksp-text-xl ksp-text-[#1a0dab]"},[o._v(" "+o._s(t.currentContent[t.titleContentKey]||[t.panel.view.title,t.titleSeparator,t.siteTitle].join(" "))+" ")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.currentContent[t.descriptionContentKey]||t.descriptionFallback,expression:"currentContent[descriptionContentKey] || descriptionFallback"}],staticClass:"ksp-mt-1 ksp-line-clamp-2 ksp-text-sm ksp-text-[#4d5156]"},[o._v(" "+o._s(t.currentContent[t.descriptionContentKey]||t.descriptionFallback)+" ")])]),n("k-button-group",{directives:[{name:"show",rawName:"v-show",value:t.searchConsoleUrl,expression:"searchConsoleUrl"}],staticClass:"ksp-mt-2 ksp-w-full"},[n("k-button",{attrs:{link:t.searchConsoleUrl,icon:"open",target:"_blank"}},[o._v(" Google Search Console ")])],1)],1)},D=[],W=O(V,z,D,!1,null,null,null,null);const G=W.exports;window.panel.plugin("johannschopplich/serp-preview",{sections:{"serp-preview":G}})})();
